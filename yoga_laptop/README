		Lenovo Yoga Kernel Module

This is the start of a Yoga-specific kernel module.  The ideapad_laptop
kernel module doesn't work because the Yoga EC information is different
from the standard Ideapad EC information.  As well, the Yoga does not have
any physical RF kill switches.

There is probably a lot more stuff that should be removed from this module.



The module depends on the sparse keymap kernel module.  To ensure that this
is available
  sudo modprobe sparse_keymap
Then to load the module itself
  sudo insmod ./yoga_laptop.ko 


Right now the only thing that this module is known to be useful for is to
handle two keys (FnF7 and Novo) that only produce ACPI notifications.


Problematic Yoga Special Keys

Fn F5	Produces the same scan codes as F5
Fn F6	Produces unrecognised scan codes, fix to produce XF86TouchPadToggle
		sudo setkeycodes e03f 191
Fn F7	Produces ACPI Notify 0x2000, fixed in this module
Fn F9	Appears to work entirely in firmware
Break	Works the same as Pause, fix to produce Break
		sudo setkeycodes e046 124; xmodmap -e "keycode 132 = Break"
Fn sp	Appears to work entirely in firmware
Novo	Produces ACPI Notify 0x0008, fixed in this module
Windows	The on-screen button is indistinguishable from the keyboard key





Results of probing ACPI notifies

I wrote up a kernel module that attached to all the possible ACPI devices
and reported ACPI notifies.  The only ones I found were for VPC2004, which
is, I believe, the Embedded Controller.  The ideapad laptop module is also
for VPC2004 and identifies two bytes (vpc1 and vpc2) in the EC memory as
carrying information for that notify so I also printed these bits 

Device  #  (vp2<<8 | vpc1)

VPC2004 80 08	identified as for the Novo button
	Is indeed generated by Novo button presses, but the length
	information in ideapad_laptop does not seem to work
VPC2004	80 40 	identified as for SwitchVideo key
	Is generated when the lid opens while on AC, i.e., when the
	internal screen is turned back on
VPC2004 80 2000	identified as for the AirplaneMode key
	Is indeed for AirplaneMode key





Feb 12 14:40:14 idefix kernel: [181910.785726] test: 

Yoga ACPI notify event: 
